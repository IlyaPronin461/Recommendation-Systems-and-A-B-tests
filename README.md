# Модели

В данном проекте сравниваются две модели рекомендаций:
- **Control Model** - базовая модель, где текст кодировался при помощи  TF-IDF
- **Test Model** - экспериментальная модель с дополнительными фичами, включая временные характеристики и embedding'и модели RoBERTa

Подробный процесс обучения и особенности каждой модели можно найти в соответствующих коммитах в этом GitHub репозитории:
- `Control Model`: https://github.com/IlyaPronin461/Recommendation-Systems-and-A-B-tests/tree/4594d397467c878cf47f1a910d7ce433f7157883
- `Test Model`: https://github.com/IlyaPronin461/Recommendation-Systems-and-A-B-tests/tree/760dc8c6bda43056a8084fa264460520dd056a1c


# A/B тестирование двух моделей рекомендаций

## 1. Механизм A/B тестирования

В файле `app.py` реализован механизм разделения пользователей на две группы:

1. **Группы тестирования**:
   - `control` (50% пользователей) - получают рекомендации от Control Model
   - `test` (50% пользователей) - получают рекомендации от Test Model

2. **Распределение пользователей**:
   - Группа определяется хешированием user_id с добавлением salt
   - Гарантируется равномерное распределение (50/50)

3. **Особенности реализации**:
   - Для каждой группы загружаются свои фичи из разных таблиц
   - Test Model использует дополнительные временные фичи (час, день недели и т.д.)
   - Обе модели возвращают топ-N рекомендаций, исключая уже лайкнунные посты

## 2. Результаты A/B теста

Эксперимент проводился в течение 2 недель. Основные результаты:

1. **Проверка распределения**:
   - Группы оказались равного размера (50/50)
   - Было обнаружено небольшое количество пользователей в обеих группах, которые были исключены из анализа

2. **Общая активность**:
   - 89.5% пользователей сделали хотя бы один лайк за время эксперимента

3. **Сравнение метрик**:
   - **Доля пользователей с лайками**: статистически значимо выше в тестовой группе (критерий Манна-Уитни-Уилкоксона, p < 0.05)
   - **Количество лайков на пользователя**: также значимо выше в тестовой группе

4. **HitRate (CTR)**:
   - Общий hitrate составил 71%
   - В тестовой группе hitrate был на 1 процентный пункт выше
   - Различие статистически значимо (бакетный тест с 100 бакетами, p < 0.05)

**Вывод**: экспериментальная модель (Test Model) показала статистически значимое улучшение всех ключевых метрик по сравнению с контрольной моделью.